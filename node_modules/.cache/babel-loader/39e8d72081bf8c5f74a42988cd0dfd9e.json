{"ast":null,"code":"import _regeneratorRuntime from\"C:/Projects/linkedout/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Projects/linkedout/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Projects/linkedout/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import axios from'axios';import{useNavigate}from'react-router-dom';import{useState,useEffect}from'react';import NavBar from'./NavBar';import JobCard from'./JobCard';import jwt from\"jsonwebtoken\";import'./cssfiles/jobboard.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function AppliedJobs(){var nav=useNavigate();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];useEffect(function(){var checkAuthorization=function checkAuthorization(){console.log(\"AUTHENTICATING\");var token=localStorage.getItem(\"token\");if(token){var user=jwt.decode(token);console.log(\"USER WHILE AUTHENTICATING : \",user);if(!user){localStorage.removeItem(\"token\");nav(\"/login\");}else{setEmail(user.email);}}else nav(\"/login\");};checkAuthorization();},[nav]);var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),appliedJobCards=_useState4[0],setAppliedJobCards=_useState4[1];useEffect(function(){function fetchAppliedJobs(){return _fetchAppliedJobs.apply(this,arguments);}// if (email != \"\") \nfunction _fetchAppliedJobs(){_fetchAppliedJobs=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res,appliedJobs;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post(\"https://linkedoutbackend.onrender.com/user/applied-jobs\",{email:email});case 2:res=_context.sent;appliedJobs=res.data.appliedJobs;// console.log(\"applied job ids:\" ,appliedJobIds);\n// const res2 = await axios.get('http://localhost:3000/user/jobs')\n// const jobs = res2.data.jobs\n// const appliedJobs = jobs.filter(job => appliedJobIds.includes(job.id))\nsetAppliedJobCards(appliedJobs.map(function(job){return/*#__PURE__*/_jsx(JobCard,{id:job.id,title:job.title,location:job.location,deadline:job.deadline,contact:job.contact,hasApplied:true});}));case 5:case\"end\":return _context.stop();}}},_callee);}));return _fetchAppliedJobs.apply(this,arguments);}fetchAppliedJobs();},[email]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(NavBar,{}),/*#__PURE__*/_jsx(\"div\",{id:\"appliedcard\",children:appliedJobCards})]});}export default AppliedJobs;","map":{"version":3,"names":["React","axios","useNavigate","useState","useEffect","NavBar","JobCard","jwt","AppliedJobs","nav","email","setEmail","checkAuthorization","console","log","token","localStorage","getItem","user","decode","removeItem","appliedJobCards","setAppliedJobCards","fetchAppliedJobs","post","res","appliedJobs","data","map","job","id","title","location","deadline","contact"],"sources":["C:/Projects/linkedout/client/src/components/user/AppliedJobs.js"],"sourcesContent":["import React from 'react'\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom'\r\nimport {useState, useEffect} from 'react';\r\nimport NavBar from './NavBar'\r\nimport JobCard from './JobCard'\r\nimport jwt from \"jsonwebtoken\";\r\nimport './cssfiles/jobboard.css'\r\n\r\nfunction AppliedJobs () {\r\n\r\n  const nav = useNavigate();\r\n\r\n  const [email, setEmail] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const checkAuthorization = () => {\r\n      console.log(\"AUTHENTICATING\");\r\n      const token = localStorage.getItem(\"token\");\r\n      if (token) {\r\n        const user = jwt.decode(token);\r\n        console.log(\"USER WHILE AUTHENTICATING : \", user);\r\n        if (!user) {\r\n          localStorage.removeItem(\"token\");\r\n          nav(\"/login\");\r\n        }\r\n        else {\r\n            setEmail(user.email);\r\n        }\r\n      }\r\n      else nav(\"/login\");\r\n    };\r\n    checkAuthorization();\r\n  }, [nav]);\r\n\r\n  const [appliedJobCards, setAppliedJobCards] = useState([]);\r\n\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    async function fetchAppliedJobs() {\r\n        const res = await axios.post(\"https://linkedoutbackend.onrender.com/user/applied-jobs\", {email: email});\r\n        const appliedJobs = res.data.appliedJobs;\r\n        // console.log(\"applied job ids:\" ,appliedJobIds);\r\n        // const res2 = await axios.get('http://localhost:3000/user/jobs')\r\n        // const jobs = res2.data.jobs\r\n        // const appliedJobs = jobs.filter(job => appliedJobIds.includes(job.id))\r\n        \r\n\r\n            setAppliedJobCards(\r\n                appliedJobs.map(job =>\r\n                <JobCard\r\n                id={job.id}\r\n                title={job.title}\r\n                location={job.location}\r\n                deadline={job.deadline}\r\n                contact={job.contact}\r\n                hasApplied={true}\r\n                />));\r\n            \r\n    }\r\n    // if (email != \"\") \r\n    fetchAppliedJobs();\r\n  }, [email]);\r\n\r\n  return (\r\n    <div>\r\n      <NavBar />\r\n      <div id=\"appliedcard\">{appliedJobCards}</div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default AppliedJobs\r\n"],"mappings":"sWAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,OAAQC,QAAR,CAAkBC,SAAlB,KAAkC,OAAlC,CACA,MAAOC,OAAP,KAAmB,UAAnB,CACA,MAAOC,QAAP,KAAoB,WAApB,CACA,MAAOC,IAAP,KAAgB,cAAhB,CACA,MAAO,yBAAP,C,wFAEA,QAASC,YAAT,EAAwB,CAEtB,GAAMC,IAAG,CAAGP,WAAW,EAAvB,CAEA,cAA0BC,QAAQ,CAAC,EAAD,CAAlC,wCAAOO,KAAP,eAAcC,QAAd,eAEAP,SAAS,CAAC,UAAM,CACd,GAAMQ,mBAAkB,CAAG,QAArBA,mBAAqB,EAAM,CAC/BC,OAAO,CAACC,GAAR,CAAY,gBAAZ,EACA,GAAMC,MAAK,CAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd,CACA,GAAIF,KAAJ,CAAW,CACT,GAAMG,KAAI,CAAGX,GAAG,CAACY,MAAJ,CAAWJ,KAAX,CAAb,CACAF,OAAO,CAACC,GAAR,CAAY,8BAAZ,CAA4CI,IAA5C,EACA,GAAI,CAACA,IAAL,CAAW,CACTF,YAAY,CAACI,UAAb,CAAwB,OAAxB,EACAX,GAAG,CAAC,QAAD,CAAH,CACD,CAHD,IAIK,CACDE,QAAQ,CAACO,IAAI,CAACR,KAAN,CAAR,CACH,CACF,CAVD,IAWKD,IAAG,CAAC,QAAD,CAAH,CACN,CAfD,CAgBAG,kBAAkB,GACnB,CAlBQ,CAkBN,CAACH,GAAD,CAlBM,CAAT,CAoBA,eAA8CN,QAAQ,CAAC,EAAD,CAAtD,yCAAOkB,eAAP,eAAwBC,kBAAxB,eAKAlB,SAAS,CAAC,UAAM,SACCmB,iBADD,mDAsBd;AAtBc,yGACd,+KACsBtB,MAAK,CAACuB,IAAN,CAAW,yDAAX,CAAsE,CAACd,KAAK,CAAEA,KAAR,CAAtE,CADtB,QACUe,GADV,eAEUC,WAFV,CAEwBD,GAAG,CAACE,IAAJ,CAASD,WAFjC,CAGI;AACA;AACA;AACA;AAGIJ,kBAAkB,CACdI,WAAW,CAACE,GAAZ,CAAgB,SAAAC,GAAG,qBACnB,KAAC,OAAD,EACA,EAAE,CAAEA,GAAG,CAACC,EADR,CAEA,KAAK,CAAED,GAAG,CAACE,KAFX,CAGA,QAAQ,CAAEF,GAAG,CAACG,QAHd,CAIA,QAAQ,CAAEH,GAAG,CAACI,QAJd,CAKA,OAAO,CAAEJ,GAAG,CAACK,OALb,CAMA,UAAU,CAAE,IANZ,EADmB,EAAnB,CADc,CAAlB,CATR,sDADc,mDAuBdX,gBAAgB,GACjB,CAxBQ,CAwBN,CAACb,KAAD,CAxBM,CAAT,CA0BA,mBACE,oCACE,KAAC,MAAD,IADF,cAEE,YAAK,EAAE,CAAC,aAAR,UAAuBW,eAAvB,EAFF,GADF,CAMD,CAED,cAAeb,YAAf"},"metadata":{},"sourceType":"module"}