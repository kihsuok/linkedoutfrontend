{"ast":null,"code":"import _regeneratorRuntime from\"C:/Projects/linkedout/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Projects/linkedout/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Projects/linkedout/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{useNavigate,useParams}from'react-router-dom';import NavBar from'./NavBar';import'./cssfiles/profile.css';import jwt from'jsonwebtoken';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Profile(){var nav=useNavigate();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];// const [name, setName] = useState('')\n// const [dob, setDob] = useState('')\n// const [phone, setPhone] = useState()\n// const [qualifications, setQualifications] = useState()\n// const [experience, setExperience] = useState()\nvar _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),editedName=_useState4[0],setEditedName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),editedDob=_useState6[0],setEditedDob=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),editedPhone=_useState8[0],setEditedPhone=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),editedQualifications=_useState10[0],setEditedQualifications=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),editedExperience=_useState12[0],setEditedExperience=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),isEditing=_useState14[0],setIsEditing=_useState14[1];useEffect(function(){var checkAuthorization=function checkAuthorization(){console.log('AUTHENTICATING');var token=localStorage.getItem('token');if(token){var user=jwt.decode(token);console.log('USER WHILE AUTHENTICATING : ',user);if(!user){localStorage.removeItem('token');nav('/login');}else{setEmail(user.email);}}else nav('/login');};checkAuthorization();},[nav]);useEffect(function(){console.log(\"FETCHING\");console.log(email);function fetchProfile(){return _fetchProfile.apply(this,arguments);}function _fetchProfile(){_fetchProfile=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post('https://linkedoutbackend.onrender.com/user/profile',{email:email});case 2:res=_context.sent;console.log(res.data.user);setEditedName(res.data.user.name);setEditedDob(res.data.user.dob);setEditedPhone(res.data.user.phone);setEditedQualifications(res.data.user.qualifications);setEditedExperience(res.data.user.experience);case 9:case\"end\":return _context.stop();}}},_callee);}));return _fetchProfile.apply(this,arguments);}fetchProfile();},[email]);var handleUpdate=function handleUpdate(){setIsEditing(true);};var handleSubmit=function handleSubmit(event){event.preventDefault();axios.post('https://linkedoutbackend.onrender.com/user/update',{email:email,name:editedName,dob:editedDob,phone:editedPhone,qualifications:editedQualifications,experience:editedExperience});setIsEditing(false);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(NavBar,{}),/*#__PURE__*/_jsx(\"h1\",{className:\"profile-title\",children:\"Profile Page\"}),isEditing?/*#__PURE__*/_jsxs(\"form\",{className:\"profile-form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"Name:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"name\",value:editedName,onChange:function onChange(event){return setEditedName(event.target.value);}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"dob\",children:\"Date of Birth:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",id:\"dob\",value:editedDob,onChange:function onChange(event){return setEditedDob(event.target.value);}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"phone\",children:\"Phone Number:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",id:\"phone\",value:editedPhone,onChange:function onChange(event){return setEditedPhone(event.target.value);}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"qualifications\",children:\"Qualifications:\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"qualifications\",value:editedQualifications,onChange:function onChange(event){return setEditedQualifications(event.target.value);}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"experience\",children:\"Experience:\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"experience\",value:editedExperience,onChange:function onChange(event){return setEditedExperience(event.target.value);}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Save\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"profile-container\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Name: \",editedName]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Date of Birth: \",editedDob]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Email: \",email]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Phone Number: \",editedPhone]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Qualifications: \",editedQualifications]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Experience: \",editedExperience]}),/*#__PURE__*/_jsx(\"button\",{id:\"update\",onClick:handleUpdate,children:\"Update\"})]})]});}export default Profile;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useParams","NavBar","jwt","axios","Profile","nav","email","setEmail","editedName","setEditedName","editedDob","setEditedDob","editedPhone","setEditedPhone","editedQualifications","setEditedQualifications","editedExperience","setEditedExperience","isEditing","setIsEditing","checkAuthorization","console","log","token","localStorage","getItem","user","decode","removeItem","fetchProfile","post","res","data","name","dob","phone","qualifications","experience","handleUpdate","handleSubmit","event","preventDefault","target","value"],"sources":["C:/Projects/linkedout/client/src/components/user/Profile.js"],"sourcesContent":["import React, { useState , useEffect} from \"react\";\r\nimport { useNavigate, useParams } from 'react-router-dom'\r\nimport NavBar from './NavBar';\r\nimport './cssfiles/profile.css'\r\nimport jwt from 'jsonwebtoken';\r\nimport axios from 'axios';\r\n\r\nfunction Profile() {\r\n\r\n  const nav = useNavigate();\r\n\r\n  const [email, setEmail] = useState(\"\");\r\n  // const [name, setName] = useState('')\r\n  // const [dob, setDob] = useState('')\r\n  // const [phone, setPhone] = useState()\r\n  // const [qualifications, setQualifications] = useState()\r\n  // const [experience, setExperience] = useState()\r\n\r\n  const [editedName, setEditedName] = useState('');\r\n  const [editedDob, setEditedDob] = useState('');\r\n  const [editedPhone, setEditedPhone] = useState('');\r\n  const [editedQualifications, setEditedQualifications] = useState('');\r\n  const [editedExperience, setEditedExperience] = useState('');\r\n  const [isEditing, setIsEditing] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const checkAuthorization = () => {\r\n      console.log('AUTHENTICATING')\r\n      const token = localStorage.getItem('token')\r\n      if (token) {\r\n        const user = jwt.decode(token)\r\n        console.log('USER WHILE AUTHENTICATING : ', user)\r\n        if (!user) {\r\n          localStorage.removeItem('token')\r\n          nav('/login')\r\n        } else {\r\n          setEmail(user.email)\r\n        }\r\n      } else nav('/login')\r\n    }\r\n    checkAuthorization()\r\n  }, [nav])\r\n\r\n  \r\n\r\n  useEffect(() => {\r\n    console.log(\"FETCHING\");\r\n    console.log(email);\r\n    async function fetchProfile () {\r\n\r\n      const res = await axios.post(\r\n        'https://linkedoutbackend.onrender.com/user/profile',\r\n        { email: email }\r\n      )\r\n      console.log( res.data.user);\r\n      setEditedName(res.data.user.name)\r\n      setEditedDob(res.data.user.dob)\r\n      setEditedPhone(res.data.user.phone)\r\n      setEditedQualifications(res.data.user.qualifications)\r\n      setEditedExperience(res.data.user.experience)\r\n    }\r\n    fetchProfile();\r\n  }, [email])\r\n  \r\n  \r\n\r\n\r\n  const handleUpdate = () => {\r\n    setIsEditing(true);\r\n  };\r\n\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault();\r\n    axios.post('https://linkedoutbackend.onrender.com/user/update', {\r\n      email: email,\r\n      name: editedName,\r\n      dob: editedDob,\r\n      phone:editedPhone,\r\n      qualifications:editedQualifications,\r\n      experience:editedExperience\r\n      \r\n    })\r\n    setIsEditing(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <NavBar />\r\n      <h1 className=\"profile-title\">Profile Page</h1>\r\n      {isEditing ? (\r\n        <form className=\"profile-form\" onSubmit={handleSubmit}>\r\n          <label htmlFor=\"name\">Name:</label>\r\n          <input\r\n            type=\"text\"\r\n            id=\"name\"\r\n            value={editedName}\r\n            onChange={(event) => setEditedName(event.target.value)}\r\n          />\r\n          <br />\r\n          <label htmlFor=\"dob\">Date of Birth:</label>\r\n          <input\r\n            type=\"date\"\r\n            id=\"dob\"\r\n            value={editedDob}\r\n            onChange={(event) => setEditedDob(event.target.value)}\r\n          />\r\n          <br />\r\n  \r\n          <br />\r\n          <label htmlFor=\"phone\">Phone Number:</label>\r\n          <input\r\n            type=\"tel\"\r\n            id=\"phone\"\r\n            value={editedPhone}\r\n            onChange={(event) => setEditedPhone(event.target.value)}\r\n          />\r\n          <br />\r\n          <label htmlFor=\"qualifications\">Qualifications:</label>\r\n          <textarea\r\n            id=\"qualifications\"\r\n            value={editedQualifications}\r\n            onChange={(event) => setEditedQualifications(event.target.value)}\r\n          ></textarea>\r\n          <br />\r\n          <label htmlFor=\"experience\">Experience:</label>\r\n          <textarea\r\n            id=\"experience\"\r\n            value={editedExperience}\r\n            onChange={(event) => setEditedExperience(event.target.value)}\r\n          ></textarea>\r\n          <br />\r\n          <button type=\"submit\">Save</button>\r\n        </form>\r\n      ) : (\r\n        <div className=\"profile-container\">\r\n          <p>Name: {editedName}</p>\r\n          <p>Date of Birth: {editedDob}</p>\r\n          <p>Email: {email}</p>\r\n          <p>Phone Number: {editedPhone}</p>\r\n          <p>Qualifications: {editedQualifications}</p>\r\n          <p>Experience: {editedExperience}</p>\r\n          <button id=\"update\" onClick={handleUpdate}>Update</button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Profile;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}