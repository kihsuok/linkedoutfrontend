{"ast":null,"code":"import _regeneratorRuntime from\"C:/Projects/linkedout/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Projects/linkedout/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Projects/linkedout/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{Link}from'react-router-dom';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function JobCard(_ref){var id=_ref.id,title=_ref.title,location=_ref.location,deadline=_ref.deadline,contact=_ref.contact,email=_ref.email,hasApplied=_ref.hasApplied,archived=_ref.archived;var _useState=useState(hasApplied),_useState2=_slicedToArray(_useState,2),applied=_useState2[0],setApplied=_useState2[1];var calculateDaysLeft=function calculateDaysLeft(){var today=new Date();var deadlineDate=new Date(deadline);var diffTime=deadlineDate.getTime()-today.getTime();var diffDays=Math.ceil(diffTime/(1000*60*60*24));return diffDays;};var daysLeft=calculateDaysLeft();var cardClass=daysLeft>7?'job-card':daysLeft>3?'job-cardwarning':daysLeft>0?'job-carddanger':'job-cardexpired';function handleApply(){return _handleApply.apply(this,arguments);}function _handleApply(){_handleApply=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post('https://linkedoutbackend.onrender.com/user/apply',{email:email,id:id});case 3:setApplied(true);_context.next=9;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 9:case\"end\":return _context.stop();}}},_callee,null,[[0,6]]);}));return _handleApply.apply(this,arguments);}var shouldDisplayApplyButton=!applied&&daysLeft>0;return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:cardClass,id:\"jobcard\",children:[/*#__PURE__*/_jsx(\"h2\",{children:title}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Id: \",id]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Location: \",location]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Deadline: \",deadline]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Contact: \",contact]}),shouldDisplayApplyButton&&/*#__PURE__*/_jsx(\"button\",{id:\"apply\",onClick:handleApply,children:\"Apply\"}),/*#__PURE__*/_jsx(Link,{to:\"/job-description/\".concat(id),children:/*#__PURE__*/_jsx(\"button\",{id:\"viewdescription\",children:\" View Job Description\"})})]})});}export default JobCard;","map":{"version":3,"names":["React","useState","Link","axios","JobCard","id","title","location","deadline","contact","email","hasApplied","archived","applied","setApplied","calculateDaysLeft","today","Date","deadlineDate","diffTime","getTime","diffDays","Math","ceil","daysLeft","cardClass","handleApply","post","console","log","shouldDisplayApplyButton"],"sources":["C:/Projects/linkedout/client/src/components/user/JobCard.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nfunction JobCard({\r\n  id,\r\n  title,\r\n  location,\r\n  deadline,\r\n  contact,\r\n  email,\r\n  hasApplied,\r\n  archived\r\n}) {\r\n  const [applied, setApplied] = useState(hasApplied);\r\n\r\n  const calculateDaysLeft = () => {\r\n    const today = new Date();\r\n    const deadlineDate = new Date(deadline);\r\n    const diffTime = deadlineDate.getTime() - today.getTime();\r\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n    return diffDays;\r\n  };\r\n\r\n  const daysLeft = calculateDaysLeft();\r\n  const cardClass =\r\n    daysLeft > 7\r\n      ? 'job-card'\r\n      : daysLeft > 3\r\n      ? 'job-cardwarning'\r\n      : daysLeft > 0\r\n      ? 'job-carddanger'\r\n      : 'job-cardexpired';\r\n\r\n  async function handleApply() {\r\n    try {\r\n      await axios.post('https://linkedoutbackend.onrender.com/user/apply', {\r\n        email: email,\r\n        id: id\r\n      });\r\n      setApplied(true);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  const shouldDisplayApplyButton = !applied && daysLeft > 0;\r\n\r\n  return (\r\n    <div>\r\n      \r\n        <div className={cardClass} id=\"jobcard\">\r\n          <h2>{title}</h2>\r\n          <p>Id: {id}</p>\r\n          <p>Location: {location}</p>\r\n          <p>Deadline: {deadline}</p>\r\n          <p>Contact: {contact}</p>\r\n          {shouldDisplayApplyButton && (\r\n            <button id=\"apply\" onClick={handleApply}>\r\n              Apply\r\n            </button>\r\n          )}\r\n        <Link to={`/job-description/${id}`}>\r\n          <button id=\"viewdescription\"> View Job Description</button>\r\n        </Link>\r\n        </div>\r\n      \r\n    </div>\r\n  );\r\n}\r\n\r\nexport default JobCard;\r\n"],"mappings":"sWAAA,MAAOA,MAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,MAAP,KAAkB,OAAlB,C,wFAEA,QAASC,QAAT,MASG,IARDC,GAQC,MARDA,EAQC,CAPDC,KAOC,MAPDA,KAOC,CANDC,QAMC,MANDA,QAMC,CALDC,QAKC,MALDA,QAKC,CAJDC,OAIC,MAJDA,OAIC,CAHDC,KAGC,MAHDA,KAGC,CAFDC,UAEC,MAFDA,UAEC,CADDC,QACC,MADDA,QACC,CACD,cAA8BX,QAAQ,CAACU,UAAD,CAAtC,wCAAOE,OAAP,eAAgBC,UAAhB,eAEA,GAAMC,kBAAiB,CAAG,QAApBA,kBAAoB,EAAM,CAC9B,GAAMC,MAAK,CAAG,GAAIC,KAAJ,EAAd,CACA,GAAMC,aAAY,CAAG,GAAID,KAAJ,CAAST,QAAT,CAArB,CACA,GAAMW,SAAQ,CAAGD,YAAY,CAACE,OAAb,GAAyBJ,KAAK,CAACI,OAAN,EAA1C,CACA,GAAMC,SAAQ,CAAGC,IAAI,CAACC,IAAL,CAAUJ,QAAQ,EAAI,KAAO,EAAP,CAAY,EAAZ,CAAiB,EAArB,CAAlB,CAAjB,CACA,MAAOE,SAAP,CACD,CAND,CAQA,GAAMG,SAAQ,CAAGT,iBAAiB,EAAlC,CACA,GAAMU,UAAS,CACbD,QAAQ,CAAG,CAAX,CACI,UADJ,CAEIA,QAAQ,CAAG,CAAX,CACA,iBADA,CAEAA,QAAQ,CAAG,CAAX,CACA,gBADA,CAEA,iBAPN,CAZC,QAqBcE,YArBd,6IAqBD,2KAEUvB,MAAK,CAACwB,IAAN,CAAW,kDAAX,CAA+D,CACnEjB,KAAK,CAAEA,KAD4D,CAEnEL,EAAE,CAAEA,EAF+D,CAA/D,CAFV,QAMIS,UAAU,CAAC,IAAD,CAAV,CANJ,8EAQIc,OAAO,CAACC,GAAR,cARJ,mEArBC,8CAiCD,GAAMC,yBAAwB,CAAG,CAACjB,OAAD,EAAYW,QAAQ,CAAG,CAAxD,CAEA,mBACE,kCAEI,aAAK,SAAS,CAAEC,SAAhB,CAA2B,EAAE,CAAC,SAA9B,wBACE,oBAAKnB,KAAL,EADF,cAEE,4BAAQD,EAAR,GAFF,cAGE,kCAAcE,QAAd,GAHF,cAIE,kCAAcC,QAAd,GAJF,cAKE,iCAAaC,OAAb,GALF,CAMGqB,wBAAwB,eACvB,eAAQ,EAAE,CAAC,OAAX,CAAmB,OAAO,CAAEJ,WAA5B,mBAPJ,cAWA,KAAC,IAAD,EAAM,EAAE,4BAAsBrB,EAAtB,CAAR,uBACE,eAAQ,EAAE,CAAC,iBAAX,mCADF,EAXA,GAFJ,EADF,CAqBD,CAED,cAAeD,QAAf"},"metadata":{},"sourceType":"module"}