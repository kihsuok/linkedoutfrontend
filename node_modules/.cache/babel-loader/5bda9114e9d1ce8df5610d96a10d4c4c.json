{"ast":null,"code":"import _regeneratorRuntime from\"C:/Projects/linkedout/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Projects/linkedout/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Projects/linkedout/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import AdminNav from'./AdminNav';import{useNavigate}from'react-router-dom';import{toast}from'react-toastify';import jwt from'jsonwebtoken';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CreateJob=function CreateJob(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),id=_useState2[0],setId=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),title=_useState4[0],setTitle=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),description=_useState6[0],setDescription=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),deadline=_useState8[0],setDeadline=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),location=_useState10[0],setLocation=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),contact=_useState12[0],setContact=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),email=_useState14[0],setEmail=_useState14[1];var nav=useNavigate();useEffect(function(){var checkAuthorization=function checkAuthorization(){console.log('AUTHENTICATING');var token=localStorage.getItem('token');if(token){var admin=jwt.decode(token);console.log('USER WHILE AUTHENTICATING : ',admin);if(!admin){localStorage.removeItem('token');nav('/login');}else{setEmail(admin.email);}}else nav('/login');};checkAuthorization();},[nav]);function AddJob(_x,_x2,_x3,_x4,_x5,_x6){return _AddJob.apply(this,arguments);}function _AddJob(){_AddJob=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(id,title,description,deadline,location,contact){var res,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch('https://linkedoutbackend.onrender.com/admin/createjob',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({id:id,title:title,description:description,location:location,deadline:deadline,contact:contact})});case 2:res=_context.sent;_context.next=5;return res.json();case 5:data=_context.sent;console.log(data);if(data.status==='ok'){toast.success('Job created successfully!',{theme:'colored'});// Redirect the user to the sign-in page\nnav('/admin-board');}else{toast.error('Failed to create job',{theme:'colored'});}case 8:case\"end\":return _context.stop();}}},_callee);}));return _AddJob.apply(this,arguments);}function handleSubmit(_x7){return _handleSubmit.apply(this,arguments);}//   const handleSubmit = (e) => {\n//     e.preventDefault();\n//     // Do something with the form data, like send it to a server\n//     console.log({\n//       title,\n//       description,\n//       deadline,\n//       location,\n//       contact,\n//     });\n//   };\nfunction _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(event){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();console.log('SUBMITTED');toast.success('Job Added',{theme:'colored'});AddJob(id,title,description,deadline,location,contact);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return _handleSubmit.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(AdminNav,{}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,id:\"createjob\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"id\",children:\"Job ID:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"id\",value:id,onChange:function onChange(e){return setId(e.target.value);}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",children:\"Job Title:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"title\",value:title,onChange:function onChange(e){return setTitle(e.target.value);}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description\",children:\"Job Description:\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"description\",value:description,onChange:function onChange(e){return setDescription(e.target.value);}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"deadline\",children:\"Deadline:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",id:\"deadline\",value:deadline,onChange:function onChange(e){return setDeadline(e.target.value);}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"location\",children:\"Location:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"location\",value:location,onChange:function onChange(e){return setLocation(e.target.value);}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"contact\",children:\"Contact:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"contact\",value:contact,onChange:function onChange(e){return setContact(e.target.value);}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"AddJob\"})]})]});};export default CreateJob;","map":{"version":3,"names":["React","useState","useEffect","AdminNav","useNavigate","toast","jwt","CreateJob","id","setId","title","setTitle","description","setDescription","deadline","setDeadline","location","setLocation","contact","setContact","email","setEmail","nav","checkAuthorization","console","log","token","localStorage","getItem","admin","decode","removeItem","AddJob","fetch","method","headers","body","JSON","stringify","res","json","data","status","success","theme","error","handleSubmit","event","preventDefault","e","target","value"],"sources":["C:/Projects/linkedout/client/src/components/admin/CreateJob.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport AdminNav from './AdminNav';\r\nimport {useNavigate} from 'react-router-dom';\r\nimport { toast } from 'react-toastify';\r\nimport jwt from 'jsonwebtoken'\r\n\r\n\r\n\r\nconst CreateJob = () => {\r\n  const [id, setId] = useState('');\r\n  const [title, setTitle] = useState('');\r\n  const [description, setDescription] = useState('');\r\n  const [deadline, setDeadline] = useState('');\r\n  const [location, setLocation] = useState('');\r\n  const [contact, setContact] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const nav=useNavigate();\r\n\r\n  useEffect(() => {\r\n    const checkAuthorization = () => {\r\n      console.log('AUTHENTICATING')\r\n      const token = localStorage.getItem('token')\r\n      if (token) {\r\n        const admin = jwt.decode(token)\r\n        console.log('USER WHILE AUTHENTICATING : ', admin)\r\n        if (!admin) {\r\n          localStorage.removeItem('token')\r\n          nav('/login')\r\n        } else {\r\n          setEmail(admin.email)\r\n        }\r\n      } else nav('/login')\r\n    }\r\n    checkAuthorization()\r\n  }, [nav])\r\n\r\n  async function AddJob (\r\n    id,\r\n    title,\r\n    description,\r\n    deadline,\r\n    location,\r\n    contact\r\n  ) {\r\n    const res = await fetch('https://linkedoutbackend.onrender.com/admin/createjob', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        id: id,\r\n        title: title,\r\n        description: description,\r\n        location: location,\r\n        deadline: deadline,\r\n        contact: contact,\r\n      })\r\n    })\r\n\r\n    const data = await res.json()\r\n    console.log(data)\r\n\r\n    if (data.status === 'ok') {\r\n      toast.success('Job created successfully!', { theme: 'colored' })\r\n      // Redirect the user to the sign-in page\r\n      nav('/admin-board')\r\n    } else {\r\n      toast.error('Failed to create job', { theme: 'colored' })\r\n    }\r\n  }\r\n\r\n  async function handleSubmit (event) {\r\n    event.preventDefault()\r\n\r\n    console.log('SUBMITTED')\r\n    toast.success('Job Added', { theme: 'colored' })\r\n\r\n    AddJob(id, title, description, deadline, location, contact)\r\n  }\r\n\r\n//   const handleSubmit = (e) => {\r\n//     e.preventDefault();\r\n//     // Do something with the form data, like send it to a server\r\n\r\n//     console.log({\r\n//       title,\r\n//       description,\r\n//       deadline,\r\n//       location,\r\n//       contact,\r\n//     });\r\n//   };\r\n\r\n  return (\r\n    <div>\r\n      <AdminNav />\r\n      <form onSubmit={handleSubmit} id=\"createjob\">\r\n        <label htmlFor=\"id\">Job ID:</label>\r\n          <input\r\n            type=\"number\"\r\n            id=\"id\"\r\n            value={id}\r\n            onChange={(e) => setId(e.target.value)}\r\n            \r\n          />\r\n          <br/>\r\n          <label htmlFor=\"title\">Job Title:</label>\r\n          <input\r\n            type=\"text\"\r\n            id=\"title\"\r\n            value={title}\r\n            onChange={(e) => setTitle(e.target.value)}\r\n          />\r\n          <br/>\r\n          <label htmlFor=\"description\">Job Description:</label>\r\n          <textarea\r\n            id=\"description\"\r\n            value={description}\r\n            onChange={(e) => setDescription(e.target.value)}\r\n          ></textarea>\r\n          <br/>\r\n\r\n          <label htmlFor=\"deadline\">Deadline:</label>\r\n          <input\r\n            type=\"date\"\r\n            id=\"deadline\"\r\n            value={deadline}\r\n            onChange={(e) => setDeadline(e.target.value)}\r\n          />\r\n          <br/>\r\n\r\n          <label htmlFor=\"location\">Location:</label>\r\n          <input\r\n            type=\"text\"\r\n            id=\"location\"\r\n            value={location}\r\n            onChange={(e) => setLocation(e.target.value)}\r\n          />\r\n          <br/>\r\n\r\n          <label htmlFor=\"contact\">Contact:</label>\r\n          <input\r\n            type=\"text\"\r\n            id=\"contact\"\r\n            value={contact}\r\n            onChange={(e) => setContact(e.target.value)}\r\n          />\r\n          <br/>\r\n\r\n          <button type=\"submit\">AddJob</button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CreateJob;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}